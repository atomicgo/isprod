<h1 align="center">AtomicGo | isprod</h1>

<p align="center">
<img src="https://img.shields.io/endpoint?url=https%3A%2F%2Fatomicgo.dev%2Fapi%2Fshields%2Fisprod&style=flat-square" alt="Downloads">

<a href="https://github.com/atomicgo/isprod/releases">
<img src="https://img.shields.io/github/v/release/atomicgo/isprod?style=flat-square" alt="Latest Release">
</a>

<a href="https://codecov.io/gh/atomicgo/isprod" target="_blank">
<img src="https://img.shields.io/github/actions/workflow/status/atomicgo/isprod/go.yml?style=flat-square" alt="Tests">
</a>

<a href="https://codecov.io/gh/atomicgo/isprod" target="_blank">
<img src="https://img.shields.io/codecov/c/gh/atomicgo/isprod?color=magenta&logo=codecov&style=flat-square" alt="Coverage">
</a>

<a href="https://codecov.io/gh/atomicgo/isprod">
<!-- unittestcount:start --><img src="https://img.shields.io/badge/Unit_Tests-6-magenta?style=flat-square" alt="Unit test count"><!-- unittestcount:end -->
</a>

<a href="https://opensource.org/licenses/MIT" target="_blank">
<img src="https://img.shields.io/badge/License-MIT-yellow.svg?style=flat-square" alt="License: MIT">
</a>
  
<a href="https://goreportcard.com/report/github.com/atomicgo/isprod" target="_blank">
<img src="https://goreportcard.com/badge/github.com/atomicgo/isprod?style=flat-square" alt="Go report">
</a>   

</p>

---

<p align="center">
<strong><a href="https://pkg.go.dev/atomicgo.dev/isprod#section-documentation" target="_blank">Documentation</a></strong>
|
<strong><a href="https://github.com/atomicgo/atomicgo/blob/main/CONTRIBUTING.md" target="_blank">Contributing</a></strong>
|
<strong><a href="https://github.com/atomicgo/atomicgo/blob/main/CODE_OF_CONDUCT.md" target="_blank">Code of Conduct</a></strong>
</p>

---

<p align="center">
  <img src="https://raw.githubusercontent.com/atomicgo/atomicgo/main/assets/header.png" alt="AtomicGo">
</p>

<p align="center">
<table>
<tbody>
</tbody>
</table>
</p>
<h3  align="center"><pre>go get atomicgo.dev/isprod</pre></h3>
<p align="center">
<table>
<tbody>
</tbody>
</table>
</p>

<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# isprod

```go
import "atomicgo.dev/isprod"
```

Package isprod is a simple package to check if the application is running in production or not.

It has default conditions that fit the most common cases, but you can also add your own conditions.

Default rules are:

```
If environment variable 'prod' is set and its value is not one of [false], consider it as production environment.
If environment variable 'production' is set and its value is not one of [false], consider it as production environment.
If environment variable 'staging' is set and its value is not one of [false], consider it as production environment.
If environment variable 'live' is set and its value is not one of [false], consider it as production environment.
If environment variable 'ci' is set and its value is not one of [false], consider it as production environment.
If environment variable 'PROD' is set and its value is not one of [false], consider it as production environment.
If environment variable 'PRODUCTION' is set and its value is not one of [false], consider it as production environment.
If environment variable 'STAGING' is set and its value is not one of [false], consider it as production environment.
If environment variable 'LIVE' is set and its value is not one of [false], consider it as production environment.
If environment variable 'CI' is set and its value is not one of [false], consider it as production environment.
If environment variable 'env' is set and its value is one of [prod, production, staging, live, ci, PROD, PRODUCTION, STAGING, LIVE, CI], consider it as production environment.
If environment variable 'environment' is set and its value is one of [prod, production, staging, live, ci, PROD, PRODUCTION, STAGING, LIVE, CI], consider it as production environment.
If environment variable 'mode' is set and its value is one of [prod, production, staging, live, ci, PROD, PRODUCTION, STAGING, LIVE, CI], consider it as production environment.
If environment variable 'ENV' is set and its value is one of [prod, production, staging, live, ci, PROD, PRODUCTION, STAGING, LIVE, CI], consider it as production environment.
If environment variable 'ENVIRONMENT' is set and its value is one of [prod, production, staging, live, ci, PROD, PRODUCTION, STAGING, LIVE, CI], consider it as production environment.
If environment variable 'MODE' is set and its value is one of [prod, production, staging, live, ci, PROD, PRODUCTION, STAGING, LIVE, CI], consider it as production environment.
```

## Index

- [func Check\(\) bool](<#Check>)
- [type Condition](<#Condition>)
  - [func \(c Condition\) Check\(\) bool](<#Condition.Check>)
  - [func \(c Condition\) String\(\) string](<#Condition.String>)
- [type Conditions](<#Conditions>)
  - [func \(c \*Conditions\) Add\(condition Condition\)](<#Conditions.Add>)
  - [func \(c Conditions\) Check\(\) bool](<#Conditions.Check>)
  - [func \(c Conditions\) String\(\) string](<#Conditions.String>)


<a name="Check"></a>
## func [Check](<https://github.com/atomicgo/isprod/blob/main/isprod.go#L167>)

```go
func Check() bool
```

Check checks if the application is running in production or not. It uses the DefaultConditions. If you want to use your own conditions, use the Conditions.Check\(\) method.

<details><summary>Example</summary>
<p>



```go
package main

import (
	"atomicgo.dev/isprod"
	"fmt"
	"os"
)

func main() {
	os.Setenv("PRODUCTION", "true") // Many common names are supported. See DefaultConditions.
	fmt.Println(isprod.Check())
}
```

#### Output

```
true
```

</p>
</details>

<a name="Condition"></a>
## type [Condition](<https://github.com/atomicgo/isprod/blob/main/isprod.go#L81-L90>)

Condition is a condition that checks if the environment is production.

```go
type Condition struct {
    // EnvVarName is the name of the environment variable to check.
    EnvVarName string
    // AllowedValues is a list of values that are considered valid for the environment variable.
    AllowedValues []string
    // AllowAnyValue can be set to true if any value for the environment variable is allowed.
    AllowAnyValue bool
    // ExcludedValues is a list of values that are specifically not allowed, even if AllowAnyValue is set to true.
    ExcludedValues []string
}
```

<a name="Condition.Check"></a>
### func \(Condition\) [Check](<https://github.com/atomicgo/isprod/blob/main/isprod.go#L93>)

```go
func (c Condition) Check() bool
```

Check checks if the condition is met.

<details><summary>Example</summary>
<p>



```go
package main

import (
	"atomicgo.dev/isprod"
	"fmt"
	"os"
)

func main() {
	os.Setenv("MY_ENV_VAR", "live")

	cond := isprod.Condition{
		EnvVarName:     "MY_ENV_VAR",
		AllowAnyValue:  true,
		ExcludedValues: []string{"false"},
	}

	fmt.Println(cond.Check())
}
```

#### Output

```
true
```

</p>
</details>

<a name="Condition.String"></a>
### func \(Condition\) [String](<https://github.com/atomicgo/isprod/blob/main/isprod.go#L124>)

```go
func (c Condition) String() string
```



<a name="Conditions"></a>
## type [Conditions](<https://github.com/atomicgo/isprod/blob/main/isprod.go#L135>)

Conditions is a list of conditions.

```go
type Conditions []Condition
```

<a name="DefaultConditions"></a>DefaultConditions is a list of conditions that are used by default. It's initialized at package init. Rules: If environment variable 'prod' is set and its value is not one of \[false\], consider it as production environment. If environment variable 'production' is set and its value is not one of \[false\], consider it as production environment. If environment variable 'staging' is set and its value is not one of \[false\], consider it as production environment. If environment variable 'live' is set and its value is not one of \[false\], consider it as production environment. If environment variable 'ci' is set and its value is not one of \[false\], consider it as production environment. If environment variable 'PROD' is set and its value is not one of \[false\], consider it as production environment. If environment variable 'PRODUCTION' is set and its value is not one of \[false\], consider it as production environment. If environment variable 'STAGING' is set and its value is not one of \[false\], consider it as production environment. If environment variable 'LIVE' is set and its value is not one of \[false\], consider it as production environment. If environment variable 'CI' is set and its value is not one of \[false\], consider it as production environment. If environment variable 'env' is set and its value is one of \[prod, production, staging, live, ci, PROD, PRODUCTION, STAGING, LIVE, CI\], consider it as production environment. If environment variable 'environment' is set and its value is one of \[prod, production, staging, live, ci, PROD, PRODUCTION, STAGING, LIVE, CI\], consider it as production environment. If environment variable 'mode' is set and its value is one of \[prod, production, staging, live, ci, PROD, PRODUCTION, STAGING, LIVE, CI\], consider it as production environment. If environment variable 'ENV' is set and its value is one of \[prod, production, staging, live, ci, PROD, PRODUCTION, STAGING, LIVE, CI\], consider it as production environment. If environment variable 'ENVIRONMENT' is set and its value is one of \[prod, production, staging, live, ci, PROD, PRODUCTION, STAGING, LIVE, CI\], consider it as production environment. If environment variable 'MODE' is set and its value is one of \[prod, production, staging, live, ci, PROD, PRODUCTION, STAGING, LIVE, CI\], consider it as production environment.

```go
var DefaultConditions Conditions
```

<a name="Conditions.Add"></a>
### func \(\*Conditions\) [Add](<https://github.com/atomicgo/isprod/blob/main/isprod.go#L138>)

```go
func (c *Conditions) Add(condition Condition)
```

Add adds a condition to the list.

<details><summary>Example</summary>
<p>



```go
package main

import (
	"atomicgo.dev/isprod"
	"fmt"
)

func main() {
	var conds isprod.Conditions

	cond1 := isprod.Condition{
		EnvVarName:    "ENV_VAR_1",
		AllowAnyValue: true,
	}
	cond2 := isprod.Condition{
		EnvVarName:    "ENV_VAR_2",
		AllowAnyValue: true,
	}

	conds.Add(cond1)
	conds.Add(cond2)

	fmt.Println(len(conds))
}
```

#### Output

```
2
```

</p>
</details>

<a name="Conditions.Check"></a>
### func \(Conditions\) [Check](<https://github.com/atomicgo/isprod/blob/main/isprod.go#L143>)

```go
func (c Conditions) Check() bool
```

Check checks if any of the conditions is true.

<details><summary>Example</summary>
<p>



```go
package main

import (
	"atomicgo.dev/isprod"
	"fmt"
	"os"
)

func main() {
	os.Setenv("ENV_VAR_1", "true")

	var conds isprod.Conditions

	cond1 := isprod.Condition{
		EnvVarName:    "ENV_VAR_1",
		AllowAnyValue: true,
	}
	cond2 := isprod.Condition{
		EnvVarName:    "ENV_VAR_2",
		AllowAnyValue: true,
	}

	conds.Add(cond1)
	conds.Add(cond2)

	fmt.Println(conds.Check())
}
```

#### Output

```
true
```

</p>
</details>

<a name="Conditions.String"></a>
### func \(Conditions\) [String](<https://github.com/atomicgo/isprod/blob/main/isprod.go#L154>)

```go
func (c Conditions) String() string
```

String returns a string representation of the conditions in plain english.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->

---

> [AtomicGo.dev](https://atomicgo.dev) &nbsp;&middot;&nbsp;
> with ❤️ by [@MarvinJWendt](https://github.com/MarvinJWendt) |
> [MarvinJWendt.com](https://marvinjwendt.com)
